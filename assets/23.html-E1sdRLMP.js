import{_ as l}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,b as i,e as a,d as t,w as h,a as p,r as k,o as d}from"./app-BSIteuMx.js";const r="/blog_imgs/23/23_2.png",c="/blog_imgs/23/23_3.png",g="/blog_imgs/23/23_4.png",o={};function F(A,s){const n=k("RouteLink");return d(),e("div",null,[s[3]||(s[3]=i("h2",{id:"_1-摘要",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#_1-摘要"},[i("span",null,"1. 摘要")])],-1)),i("p",null,[s[1]||(s[1]=a("这篇文章主要是教铁粉在粉丝群里面布置一个主播（UP主）动态变化的QQ聊天机器人。目前使用 【插件】支持B站直播提醒，B站动态提醒，手把手教学配置。这篇文章同样给大家一个视角，没有钱的粉丝可以给你的爱豆做什么？答案是帮她做")),t(n,{to:"/post/23.html#1-2-%E7%94%A8%E6%88%B7%E6%8B%89%E6%B4%BB"},{default:h(()=>s[0]||(s[0]=[a("「用户拉活」")])),_:1}),s[2]||(s[2]=a("，解放爱豆忘记开播提醒的烦恼。"))]),s[4]||(s[4]=p('<p><strong>关键词：</strong> bilibili, B站UP主，QQ聊天机器人，B站开播提醒QQ机器人，粉丝的自我修养。</p><h2 id="_2-1-作为一个粉丝能为爱豆做什么" tabindex="-1"><a class="header-anchor" href="#_2-1-作为一个粉丝能为爱豆做什么"><span>2.1 作为一个粉丝能为爱豆做什么</span></a></h2><p>作为一个一无是处，也没有办法给爱豆刷火箭、充舰长的普通粉丝，能为你的爱豆做什么？</p><h3 id="_1-1-刷数据" tabindex="-1"><a class="header-anchor" href="#_1-1-刷数据"><span>1.1 刷数据</span></a></h3><p>作为一个idol，她（他）需要的是曝光。需要积累更多的人气，那么在视频推荐里面完播率、转发率、弹幕、收藏、回播等信息都是一些非常重要的参考因素，因此如果你没有钱，你可以多看看idol的视频。这样对于视频网站也来，也不算是作弊，因为你本来就是喜欢这个视频，希望给idol的视频带来更大的曝光量。</p><h3 id="_1-2-用户拉活" tabindex="-1"><a class="header-anchor" href="#_1-2-用户拉活"><span>1.2 用户拉活</span></a></h3><p>「用户拉活」是指提高用户活跃度的意思。和它相关还有「用户拉新」，也就是增加新的用户。只要对于一个稍微有一点点名字的UP主、主播或者各类大V，都会有自己的宣传渠道，形成自己的「私域流量」，包括但不限于微信群、QQ群、公众号、抖音号等。那么显然，很多粉丝都会选择去加相应的粉丝群，但是如果不是铁粉，那么也不一定会开直播/动态提醒。那么我们就需要通过各种渠道就告诉这些「粉丝」（伪粉），你曾经喜欢的UP主开播了。那么显然会存在一部分粉丝收到提醒后就会去看直播，刷礼物，点赞相关动态。那么这种行为就是一种「用户拉活」，可以让一部分粉丝重新变得活跃起来。如果你的「私域流量」足够大，那么这种用户拉活的效果是非常显著的，可能马上就有人来给你喜欢的UP新发的动态点赞、刚开的直播刷舰长。</p><h3 id="_1-3-qq群开播提醒机器人" tabindex="-1"><a class="header-anchor" href="#_1-3-qq群开播提醒机器人"><span>1.3 QQ群开播提醒机器人</span></a></h3><p>为了实现某种程度上的用户拉活，这里我是想给<a href="https://space.bilibili.com/244057180/" target="_blank" rel="noopener noreferrer">「UP主：大豆壳子」</a> 的粉丝群提供一个开播自动提醒的机器人，那么她的粉丝（当然主要是我），就会收到相应的提醒。这样我就可以替她挂机刷人气（原谅我并不一定有时间看）。而刚好想到 <a href="https://github.com/7sDream/" target="_blank" rel="noopener noreferrer">7sDream</a> 以前就为他最喜欢的<a href="https://space.bilibili.com/375504219/" target="_blank" rel="noopener noreferrer">「Vtuber 阿夸」</a>的粉丝群写了一个开播自动提醒的QQ聊天机器人。因此秉行着拿来主义（实际上是我不会写），我们直接用 7sDream写好的开源插件 <a href="https://github.com/7sDream/nonebot-plugin-bam" target="_blank" rel="noopener noreferrer">Bilibili Activity Monitor</a> 跟踪哔哩哔哩UP主的最近动态。目前只有两个功能：<strong>一个是直播提醒，一个是动态提醒。</strong></p><h2 id="_3-部署自动提醒机器人" tabindex="-1"><a class="header-anchor" href="#_3-部署自动提醒机器人"><span>3. 部署自动提醒机器人</span></a></h2><p>目前7sDream写了一个插件可以实现这个功能，所以我们需要做的就需要把它部署起来。</p><h3 id="_3-1-开发部署环境" tabindex="-1"><a class="header-anchor" href="#_3-1-开发部署环境"><span>3.1 开发部署环境</span></a></h3><ol><li>一个QQ小号（万一腾讯把你封了可以换一个）</li><li>一台服务器（当然你要是有一个一会断电断网的普通电脑也可以）</li></ol><h3 id="_3-2-简单知识解释" tabindex="-1"><a class="header-anchor" href="#_3-2-简单知识解释"><span>3.2 简单知识解释</span></a></h3><p>如果你是一个开发者，我建议你先看 nonebolt <a href="https://v2.nonebot.dev/" target="_blank" rel="noopener noreferrer">https://v2.nonebot.dev/</a> 理解它们之间的关系。</p><blockquote><p>简单介绍： nonebot 相当于是一个消息处理中心，收到QQ里面传过来的消息，进行命令解析，选择相应的插件处理。 cqhttp服务则是一个和腾讯服务器连接的桥梁，通过反向订阅nonebot服务，把QQ里面收到的消息发送给 nonebot，然后nonebot服务再去解析消息，选择相应的插件处理。因此部署一个QQ机器人需要两个服务，一个是 cqhttp服务和nonebot 服务。（所以只看 7sdream的插件是部署不起来的）</p></blockquote><h3 id="_3-3-部署步骤" tabindex="-1"><a class="header-anchor" href="#_3-3-部署步骤"><span>3.3 部署步骤</span></a></h3><p>下面一共9步，手把手实现自动提醒机器人。</p><p>（1）. 登录你的服务器，为你喜欢的UP主新建一个目录，这里我使用 <code>mkdir dadou</code> and <code>cd dadou</code></p><blockquote><p>dadou 是 xx up的名字。（我似乎在变相宣传？？？）</p></blockquote><p>（2）. 安装Python3.9 <code>conda create -n dadou python=3.9 pip</code>  和激活环境 <code>conda activate dadou</code></p><blockquote><p>为了方便管理，我使用 conda 进行 python版本控制，这里你也可以使用 pipenv、poetry等方式。安装3.9 是因为这个包只支持 3.9。</p></blockquote><p>（3）. 安装B站动态提醒插件 bilibili activity monitor. 参考 <a href="https://github.com/7sDream/nonebot-plugin-bam" target="_blank" rel="noopener noreferrer">https://github.com/7sDream/nonebot-plugin-bam</a>里面的readme。 这里注意，7sDream 使用的 poetry 进行包和环境的管理，但是我从来没有用过，因此选择了常见的 <code>pip</code> 安装方式。 <code>pip install nonebot-plugin-bam</code></p><blockquote><p>需要注意的坑：这里 7牛只提供了 3.9 的安装支持，因此你需要使用 python 3.9。</p></blockquote><p>（4）. 安装 nonebot <code>pip install nonebot2==2.0.0a10</code></p><blockquote><p>因为nonebot2 和 nonebot 是不兼容的，因此我们需要安装 nonebot2。 另外为什么要制定版本，因为 最近版本的 log 以及 adapter等功能分出去了，7sDream暂时还没有支持新版本。</p></blockquote><p>（5）. 降级pydantic 使用 <code>pip install pydantic==1.7.3</code> 如果不降级 pydantic到这个版本，会出现如下错误。（希望你跟着一步一步坐下来，就不好出现下面这个错误了）</p><p><img src="'+r+`" alt="image.png" loading="lazy"></p><p>（6）. 启用 cqhttp服务 地址：<a href="https://v2.nonebot.dev/guide/cqhttp-guide.html" target="_blank" rel="noopener noreferrer">https://v2.nonebot.dev/guide/cqhttp-guide.html</a> 这是用来和腾讯QQ服务器通信的 服务器，所以需要先下载 go-cqhttp，然后运行它。（运行方式在上面的链接中有写）</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>这里以 go-cqhttp (opens new window)为例:</span></span>
<span class="line"><span>(1). 下载 go-cqhttp 对应平台的 release 文件，点此前往(opens new window)</span></span>
<span class="line"><span>(2). 运行 exe 文件或者使用 ./go-cqhttp 启动</span></span>
<span class="line"><span>(3). 生成默认配置文件并修改默认配置</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中运行第2步的时候会产生一个 <code>config.hjson</code> 的文件，我们需要对文件作出修改。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/*</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    go-cqhttp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 默认配置文件</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">*/</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> QQ号</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    uin:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 你的QQ号</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> QQ密码，把下面密码换成正确的密码</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    password:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;1235678&quot;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 是否启用密码加密</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    encrypt_password:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 加密后的密码,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 如未启用密码加密将为空,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 请勿随意修改.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    password_encrypted:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 是否启用内置数据库</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 启用将会增加10-20MB的内存占用和一定的磁盘空间</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 关闭将无法使用</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 撤回</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 回复</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> get_msg</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 等上下文相关功能</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    enable_db:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 访问密钥,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 强烈推荐在公网的服务器设置</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    access_token:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 重连设置</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    relogin:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 是否启用自动重连</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 如不启用掉线后将不会自动重连</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        enabled:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 重连延迟,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 单位秒</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        relogin_delay:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 最大重连次数,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 0为无限制</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        max_relogin_times:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> API限速设置</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 该设置为全局生效</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 原</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cqhttp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 虽然启用了</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rate_limit</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 后缀,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 但是基本没插件适配</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 目前该限速设置为令牌桶算法,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 请参考:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://baike.baidu.com/item/%E4%BB%A4%E7%89%8C%E6%A1%B6%E7%AE%97%E6%B3%95/6597000?fr=aladdin</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    _rate_limit:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 是否启用限速</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        enabled:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 令牌回复频率,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 单位秒</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        frequency:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 令牌桶大小</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        bucket_size:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 是否忽略无效的CQ码</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 如果为假将原样发送</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    ignore_invalid_cqcode:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 是否强制分片发送消息</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 分片发送将会带来更快的速度</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 但是兼容性会有些问题</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    force_fragmented:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 心跳频率,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 单位秒</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 为关闭心跳</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    heartbeat_interval:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> HTTP设置</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    http_config:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 是否启用正向HTTP服务器</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        enabled:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 服务端监听地址</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        host:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0.0.0.0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 服务端监听端口</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        port:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5700</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 反向HTTP超时时间,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 单位秒</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 最小值为5，小于5将会忽略本项设置</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        timeout:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 反向HTTP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> POST地址列表</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 格式:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    地址:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> secret</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> }</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        post_urls:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> {}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 正向WS设置</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 不需要，只要有反向配置就行了。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 反向WS设置</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    ws_reverse_servers:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 可以添加多个反向WS推送</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 是否启用该推送</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            enabled:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 反向WS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Universal</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 地址</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 注意</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 设置了此项地址后下面两项将会被忽略</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 留空请使用</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            reverse_url:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ws://127.0.0.1:8080/cqhttp/ws</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 反向WS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> API</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 地址</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            reverse_api_url:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> //ws://you_websocket_api.server</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 反向WS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Event</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 地址</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            reverse_event_url:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ws://you_websocket_event.server</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 重连间隔</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 单位毫秒</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            reverse_reconnect_interval:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3000</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    ]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 上报数据类型</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 可选:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> string</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> array</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    post_message_format:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> string</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 是否使用服务器下发的新地址进行重连</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 注意,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 此设置可能导致在海外服务器上连接情况更差</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    use_sso_address:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 是否启用</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> DEBUG</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    debug:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 日志等级</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> trace,debug,info,warn,error</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    log_level:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;info&quot;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> WebUi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 设置</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    web_ui:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 是否启用</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> WebUi</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        enabled:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 监听地址</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        host:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 127.0.0.1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 监听端口</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        web_ui_port:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 9999</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        //</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 是否接收来自web的输入</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        web_input:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>再次 运行 ./go-cqhttp</p><p><strong>这里一定会出现一个问题。运行滑块，填写需要的 cookies。这里只要按照提示，根据文档操作很好理解，不做过多介绍。</strong></p><p>运行成功出现：（如果是第一次登陆，界面是不一样的，第一次登陆的时候是教你怎么把QQ用 cqhttp登上去。）</p><p><img src="`+c+`" alt="image.png" loading="lazy"></p><p>（7）. 运行 nonebot 代码</p><p>新建文件 <code>run.py</code> ，内容如下：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> nonebot</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> nonebot.adapters.cqhttp </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Bot </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">as</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> CQHTTPBot</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">nonebot.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">_env_file</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;.env&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">driver </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> nonebot.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">get_driver</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">driver.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">register_adapter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;cqhttp&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, CQHTTPBot)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">nonebot.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">load_builtin_plugins</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># load other plugins</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># bam need this to manage background tasks</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">nonebot.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">load_plugin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;nonebot_plugin_apscheduler&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">nonebot.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">load_plugin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;nonebot_plugin_bam&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">nonebot.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>（8）. 配置上面 run.py 中需要的 .env 运行环境</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 数据落地文件路径，建议设置一下。</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 用默认值（储存在内存中）的话一重启数据就没了</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">##### !!!!!!（不要使用 7sdream 提供的 :memory:)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">BAM_DB_FILE</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;my_db&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 重启时将所有用户的直播状态设置为未开播，而不是使用上次记录的状态。</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 正常使用不要打开此选项，是调试用的</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">BAM_ON_STARTUP_CLEAN_LIVE_STATUS</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">false</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 监控任务的间隔，这里设置的是每个用户间的间隔，而不是一轮的间隔。</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 所以如果一共关注了 N 个人（多个群关注同一个人只算一个）</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 那对于每个人来说，两次检测之间的间隔就是 N * interval</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 一般来说不要设置在 5 以下，可能会被 B 站 API 反爬而拒绝响应</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">BAM_TASK_INTERVAL</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">4</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 使用那一个直播间状态查询 API，默认为 2，如果发现被封禁了可以临时调到 1 试试</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">BAM_LIVE_API</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 动态内容在发送到 QQ 时的最大长度，超过长度会截断，设置为 0 或负数表示不截断</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">BAM_ACTIVITY_CONTENT_MAX_LENGTH</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">0</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">HOST</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">127.0.0.1</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 配置 NoneBot 监听的 IP/主机名</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">PORT</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">8080</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 配置 NoneBot 监听的端口</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#iDEBUG=true  # 开启 debug 模式 **请勿在生产环境开启**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">###### !!!!!! 重要，这里是一个可以用来控制 机器人的用户。比如你的大号</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">SUPERUSERS</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[&quot;你的QQ大号，或者某个群主、管理员，可多个&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 配置 NoneBot 超级用户</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">NICKNAME</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[&quot;awesome_bot&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 配置机器人的昵称</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">COMMAND_START</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[&quot;/&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 配置命令起始字符</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">COMMAND_SEP</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[&quot;/&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 配置命令分割字符</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Custom Configs</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">CUSTOM_CONFIG1</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">CUSTOM_CONFIG2</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 留空则从系统环境变量读取，如不存在则为空字符串</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>（9）. 运行 run.py 使用 python run.py</p><p><img src="`+g+'" alt="image.png" loading="lazy"></p><blockquote><p>出现如下界面：打码的部分是你的QQ机器人，也就是你的小号。</p></blockquote><p>然后就成功了，大功告成！！</p><h2 id="_4-订阅你喜欢的up主" tabindex="-1"><a class="header-anchor" href="#_4-订阅你喜欢的up主"><span>4. 订阅你喜欢的UP主</span></a></h2><p>具体的命令参见：<a href="https://github.com/7sDream/nonebot-plugin-bam" target="_blank" rel="noopener noreferrer">https://github.com/7sDream/nonebot-plugin-bam</a> 提到的命令列表。这应该能看的懂吧，可不懂给7sDream提 issue啊（误）</p><p>一共有两种方式：使用 superuser 私聊这个QQ群聊，一种是直接在群里@这个QQ机器人。</p><blockquote><p>私聊的时候不需要ATQQ机器人，在群里就需要AT。</p></blockquote><h3 id="_4-1-示例" tabindex="-1"><a class="header-anchor" href="#_4-1-示例"><span>4.1 示例</span></a></h3><p>比如你想在你的群里订阅 豆子的直播和动态，</p><ol><li>加入大豆的粉丝群</li><li>邀请你的大号以及QQ小号（机器人）进群</li><li>使用如下命令：（@bot 的意思是使用大号 AT QQ机器人。） <blockquote><p><code>@bot /bam/group/add</code></p><p><code>@bot /bam/follower/add 244057180</code></p></blockquote></li></ol><p>解释：后面这一串数字就是 &gt; <a href="https://space.bilibili.com/244057180/" target="_blank" rel="noopener noreferrer">大豆壳子主页连接 https://space.bilibili.com/244057180/</a>] 的 uid。</p><p>欢迎关注~ 这是我作为一个三无粉丝唯一能做的。</p><h2 id="_5-后记" tabindex="-1"><a class="header-anchor" href="#_5-后记"><span>5. 后记</span></a></h2><p>我从来不是一个合格的粉丝。我记得大四的时候，我们寝室一起在看<a href="https://zh.wikipedia.org/zh-hans/%E5%89%B5%E9%80%A0101" target="_blank" rel="noopener noreferrer">《创造101》</a>，那个时候就非常喜欢<a href="https://weibo.com/u/5542384916?from=myfollow_all" target="_blank" rel="noopener noreferrer">「段奥娟」</a>，但是到现在我已经几乎认不出她了。（尽管我也有关注她的微博）</p><p>我所羡慕的两个人：（因为感觉追星似乎挺有意思的）</p><p>室友佳哥。佳哥是一个经常吐槽我是一个伪粉的人。因为曾经我们一起看101的时候，我只关注段奥娟的表演节目，一些琐碎的日常视频也不看，也不打榜，也经常脸盲认不出人。而佳哥应该也不再追吴宣仪和孟美岐了，现在喜欢上了青春有你里面的 <a href="https://www.iqiyi.com/playlist1232801602.html" target="_blank" rel="noopener noreferrer">谢可寅</a>。本科毕业之后追星行为更加疯狂，包括但不限于买爱豆代言的东西、充钱打榜、看线下线上演唱会（VIP座）。但是我觉得他很快乐，嗯是的，追星好像是快乐的。</p><p>技术大佬7sDream。7sDream是一个大牛逼，在互联网公司过着公务员的生活（只是因为他效率太高了而已）。每天高强度看Vtuber，尤其是阿夸，每次有关于虚拟偶像的事情都要在群里分享，感觉每天无欲无求，曾经他说过要不要一起来看 Vtuber，可我实在感受不到他看V的快乐。不过能体会到他每次分享这些消息的时候是非常欣喜，在支持关注一个事件的发展（当然对其他事情也是如此）。</p><p>我之所以这么做就是因为受他们的影响，感觉可以给自己的业余时间找点事情来做，这样就不至于每天陷入忙碌的焦虑以及痛苦之中，毕竟看好看的小姐姐聊天还是很有意思的。虽然如果当天装束我不喜欢，我就不看了（我果然还是伪粉），这样就能做到一种很随意。毕竟你也不认识ta，看不看对方也不会在意。而自己作为观众来说，似乎能从中感到到一丝的自由。</p>',60))])}const u=l(o,[["render",F],["__file","23.html.vue"]]),b=JSON.parse('{"path":"/blog/23.html","title":"一个粉丝的自我修养","lang":"zh-CN","frontmatter":{"title":"一个粉丝的自我修养","id":23,"date":"2021-04-04T23:30:20.000Z","description":"B站开播自动提醒QQ机器人","keywords":["BBruceyuan"],"tag":["杂谈"],"category":["杂谈"],"image":"blog_imgs/23/23_1.png","permalink":"/blog/23.html","redirectFrom":"/post/23.html","head":[["meta",{"property":"og:url","content":"https://yuanchaofa.com/blog/23.html"}],["meta",{"property":"og:site_name","content":"chaofa用代码打点酱油"}],["meta",{"property":"og:title","content":"一个粉丝的自我修养"}],["meta",{"property":"og:description","content":"B站开播自动提醒QQ机器人"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://yuanchaofa.com/blog_imgs/23/23_2.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-09-30T10:01:39.000Z"}],["meta",{"property":"article:tag","content":"杂谈"}],["meta",{"property":"article:published_time","content":"2021-04-04T23:30:20.000Z"}],["meta",{"property":"article:modified_time","content":"2024-09-30T10:01:39.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"一个粉丝的自我修养\\",\\"image\\":[\\"https://yuanchaofa.com/blog_imgs/23/23_2.png\\",\\"https://yuanchaofa.com/blog_imgs/23/23_3.png\\",\\"https://yuanchaofa.com/blog_imgs/23/23_4.png\\"],\\"datePublished\\":\\"2021-04-04T23:30:20.000Z\\",\\"dateModified\\":\\"2024-09-30T10:01:39.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Chaofa Yuan\\",\\"url\\":\\"https://yuanchaofa.com\\"}]}"]]},"headers":[{"level":2,"title":"1. 摘要","slug":"_1-摘要","link":"#_1-摘要","children":[]},{"level":2,"title":"2.1 作为一个粉丝能为爱豆做什么","slug":"_2-1-作为一个粉丝能为爱豆做什么","link":"#_2-1-作为一个粉丝能为爱豆做什么","children":[{"level":3,"title":"1.1 刷数据","slug":"_1-1-刷数据","link":"#_1-1-刷数据","children":[]},{"level":3,"title":"1.2 用户拉活","slug":"_1-2-用户拉活","link":"#_1-2-用户拉活","children":[]},{"level":3,"title":"1.3 QQ群开播提醒机器人","slug":"_1-3-qq群开播提醒机器人","link":"#_1-3-qq群开播提醒机器人","children":[]}]},{"level":2,"title":"3. 部署自动提醒机器人","slug":"_3-部署自动提醒机器人","link":"#_3-部署自动提醒机器人","children":[{"level":3,"title":"3.1 开发部署环境","slug":"_3-1-开发部署环境","link":"#_3-1-开发部署环境","children":[]},{"level":3,"title":"3.2 简单知识解释","slug":"_3-2-简单知识解释","link":"#_3-2-简单知识解释","children":[]},{"level":3,"title":"3.3 部署步骤","slug":"_3-3-部署步骤","link":"#_3-3-部署步骤","children":[]}]},{"level":2,"title":"4. 订阅你喜欢的UP主","slug":"_4-订阅你喜欢的up主","link":"#_4-订阅你喜欢的up主","children":[{"level":3,"title":"4.1 示例","slug":"_4-1-示例","link":"#_4-1-示例","children":[]}]},{"level":2,"title":"5. 后记","slug":"_5-后记","link":"#_5-后记","children":[]}],"git":{"createdTime":1662801658000,"updatedTime":1727690499000,"contributors":[{"name":"Mr.Hope","email":"mister-hope@outlook.com","commits":1},{"name":"bbruceyuan","email":"chaofa.yuan@bytedance.com","commits":1}]},"readingTime":{"minutes":12.59,"words":3778},"filePathRelative":"blog/随笔/23.一个粉丝的自我修养.md","localizedDate":"2021年4月4日"}');export{u as comp,b as data};
